import{Q as J}from"./QItemLabel-DauCY6gl.js";import{n as yt,Q as $,a as ce,c as ht}from"./QItem-CJe-sbZ8.js";import{c as kt,aC as xt,aD as lt,aE as At,aF as Mt,D as jt,g as zt,r as T,a as y,w as Ce,s as ue,aG as Wt,aH as Xt,a9 as Yt,aa as Gt,o as It,h as V,aI as Jt,aJ as Zt,aK as bt,aL as el,ah as _e,a6 as tl,az as Ge,a7 as be,ai as ll,aM as ul,Q as nl,aA as we,a5 as al,aN as ol,K as il,ak as rl,L as Ve,M as pe,N as k,X as sl,P as x,v as qe,R as le,aO as wt,V as K,a4 as Be,aP as Je}from"./index-6QLLroh9.js";import{r as tt,a as cl,Q as dl}from"./QChip-DB9JiYPC.js";import{Q as fl}from"./QPage-99m8Xv-q.js";const vl=kt({name:"QField",inheritAttrs:!1,props:{...lt,tag:{type:String,default:"label"}},emits:xt,setup(){return At(Mt({tagProp:!0}))}}),j=1e3,ml=["start","center","end","start-force","center-force","end-force"],Ft=Array.prototype.filter,Sl=window.getComputedStyle(document.body).overflowAnchor===void 0?jt:function(e,i){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const s=e.children||[];Ft.call(s,b=>b.dataset&&b.dataset.qVsAnchor!==void 0).forEach(b=>{delete b.dataset.qVsAnchor});const o=s[i];o&&o.dataset&&(o.dataset.qVsAnchor="")}))};function ke(e,i){return e+i}function Ze(e,i,s,o,b,r,R,h){const S=e===window?document.scrollingElement||document.documentElement:e,E=b===!0?"offsetWidth":"offsetHeight",c={scrollStart:0,scrollViewSize:-R-h,scrollMaxSize:0,offsetStart:-R,offsetEnd:-h};if(b===!0?(e===window?(c.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,c.scrollViewSize+=document.documentElement.clientWidth):(c.scrollStart=S.scrollLeft,c.scrollViewSize+=S.clientWidth),c.scrollMaxSize=S.scrollWidth,r===!0&&(c.scrollStart=(tt===!0?c.scrollMaxSize-c.scrollViewSize:0)-c.scrollStart)):(e===window?(c.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,c.scrollViewSize+=document.documentElement.clientHeight):(c.scrollStart=S.scrollTop,c.scrollViewSize+=S.clientHeight),c.scrollMaxSize=S.scrollHeight),s!==null)for(let w=s.previousElementSibling;w!==null;w=w.previousElementSibling)w.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetStart+=w[E]);if(o!==null)for(let w=o.nextElementSibling;w!==null;w=w.nextElementSibling)w.classList.contains("q-virtual-scroll--skip")===!1&&(c.offsetEnd+=w[E]);if(i!==e){const w=S.getBoundingClientRect(),p=i.getBoundingClientRect();b===!0?(c.offsetStart+=p.left-w.left,c.offsetEnd-=p.width):(c.offsetStart+=p.top-w.top,c.offsetEnd-=p.height),e!==window&&(c.offsetStart+=c.scrollStart),c.offsetEnd+=c.scrollMaxSize-c.offsetStart}return c}function Vt(e,i,s,o){i==="end"&&(i=(e===window?document.body:e)[s===!0?"scrollWidth":"scrollHeight"]),e===window?s===!0?(o===!0&&(i=(tt===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-i),window.scrollTo(i,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,i):s===!0?(o===!0&&(i=(tt===!0?e.scrollWidth-e.offsetWidth:0)-i),e.scrollLeft=i):e.scrollTop=i}function Te(e,i,s,o){if(s>=o)return 0;const b=i.length,r=Math.floor(s/j),R=Math.floor((o-1)/j)+1;let h=e.slice(r,R).reduce(ke,0);return s%j!==0&&(h-=i.slice(r*j,s).reduce(ke,0)),o%j!==0&&o!==b&&(h-=i.slice(o,R*j).reduce(ke,0)),h}const gl={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},pt={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...gl};function yl({virtualScrollLength:e,getVirtualScrollTarget:i,getVirtualScrollEl:s,virtualScrollItemSizeComputed:o}){const b=zt(),{props:r,emit:R,proxy:h}=b,{$q:S}=h;let E,c,w,p=[],z;const _=T(0),U=T(0),D=T({}),G=T(null),Z=T(null),L=T(null),F=T({from:0,to:0}),Re=y(()=>r.tableColspan!==void 0?r.tableColspan:100);o===void 0&&(o=y(()=>r.virtualScrollItemSize));const O=y(()=>o.value+";"+r.virtualScrollHorizontal),ee=y(()=>O.value+";"+r.virtualScrollSliceRatioBefore+";"+r.virtualScrollSliceRatioAfter);Ce(ee,()=>{W()}),Ce(O,ne);function ne(){de(c,!0)}function xe(l){de(l===void 0?c:l)}function ae(l,a){const f=i();if(f==null||f.nodeType===8)return;const M=Ze(f,s(),G.value,Z.value,r.virtualScrollHorizontal,S.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd);w!==M.scrollViewSize&&W(M.scrollViewSize),P(f,M,Math.min(e.value-1,Math.max(0,parseInt(l,10)||0)),0,ml.indexOf(a)!==-1?a:c!==-1&&l>c?"end":"start")}function Ee(){const l=i();if(l==null||l.nodeType===8)return;const a=Ze(l,s(),G.value,Z.value,r.virtualScrollHorizontal,S.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd),f=e.value-1,M=a.scrollMaxSize-a.offsetStart-a.offsetEnd-U.value;if(E===a.scrollStart)return;if(a.scrollMaxSize<=0){P(l,a,0,0);return}w!==a.scrollViewSize&&W(a.scrollViewSize),Ae(F.value.from);const q=Math.floor(a.scrollMaxSize-Math.max(a.scrollViewSize,a.offsetEnd)-Math.min(z[f],a.scrollViewSize/2));if(q>0&&Math.ceil(a.scrollStart)>=q){P(l,a,f,a.scrollMaxSize-a.offsetEnd-p.reduce(ke,0));return}let g=0,m=a.scrollStart-a.offsetStart,B=m;if(m<=M&&m+a.scrollViewSize>=_.value)m-=_.value,g=F.value.from,B=m;else for(let v=0;m>=p[v]&&g<f;v++)m-=p[v],g+=j;for(;m>0&&g<f;)m-=z[g],m>-a.scrollViewSize?(g++,B=m):B=z[g]+m;P(l,a,g,B)}function P(l,a,f,M,q){const g=typeof q=="string"&&q.indexOf("-force")!==-1,m=g===!0?q.replace("-force",""):q,B=m!==void 0?m:"start";let v=Math.max(0,f-D.value[B]),N=v+D.value.total;N>e.value&&(N=e.value,v=Math.max(0,N-D.value.total)),E=a.scrollStart;const te=v!==F.value.from||N!==F.value.to;if(te===!1&&m===void 0){Me(f);return}const{activeElement:De}=document,X=L.value;te===!0&&X!==null&&X!==De&&X.contains(De)===!0&&(X.addEventListener("focusout",He),setTimeout(()=>{X!==null&&X.removeEventListener("focusout",He)})),Sl(X,f-v);const Le=m!==void 0?z.slice(v,f).reduce(ke,0):0;if(te===!0){const oe=N>=F.value.from&&v<=F.value.to?F.value.to:N;F.value={from:v,to:oe},_.value=Te(p,z,0,v),U.value=Te(p,z,N,e.value),requestAnimationFrame(()=>{F.value.to!==N&&E===a.scrollStart&&(F.value={from:F.value.from,to:N},U.value=Te(p,z,N,e.value))})}requestAnimationFrame(()=>{if(E!==a.scrollStart)return;te===!0&&Ae(v);const oe=z.slice(v,f).reduce(ke,0),ie=oe+a.offsetStart+_.value,Pe=ie+z[f];let Ie=ie+M;if(m!==void 0){const $e=oe-Le,Fe=a.scrollStart+$e;Ie=g!==!0&&Fe<ie&&Pe<Fe+a.scrollViewSize?Fe:m==="end"?Pe-a.scrollViewSize:ie-(m==="start"?0:Math.round((a.scrollViewSize-z[f])/2))}E=Ie,Vt(l,Ie,r.virtualScrollHorizontal,S.lang.rtl),Me(f)})}function Ae(l){const a=L.value;if(a){const f=Ft.call(a.children,v=>v.classList&&v.classList.contains("q-virtual-scroll--skip")===!1),M=f.length,q=r.virtualScrollHorizontal===!0?v=>v.getBoundingClientRect().width:v=>v.offsetHeight;let g=l,m,B;for(let v=0;v<M;){for(m=q(f[v]),v++;v<M&&f[v].classList.contains("q-virtual-scroll--with-prev")===!0;)m+=q(f[v]),v++;B=m-z[g],B!==0&&(z[g]+=B,p[Math.floor(g/j)]+=B),g++}}}function He(){L.value!==null&&L.value!==void 0&&L.value.focus()}function de(l,a){const f=1*o.value;(a===!0||Array.isArray(z)===!1)&&(z=[]);const M=z.length;z.length=e.value;for(let g=e.value-1;g>=M;g--)z[g]=f;const q=Math.floor((e.value-1)/j);p=[];for(let g=0;g<=q;g++){let m=0;const B=Math.min((g+1)*j,e.value);for(let v=g*j;v<B;v++)m+=z[v];p.push(m)}c=-1,E=void 0,_.value=Te(p,z,0,F.value.from),U.value=Te(p,z,F.value.to,e.value),l>=0?(Ae(F.value.from),ue(()=>{ae(l)})):fe()}function W(l){if(l===void 0&&typeof window<"u"){const m=i();m!=null&&m.nodeType!==8&&(l=Ze(m,s(),G.value,Z.value,r.virtualScrollHorizontal,S.lang.rtl,r.virtualScrollStickySizeStart,r.virtualScrollStickySizeEnd).scrollViewSize)}w=l;const a=parseFloat(r.virtualScrollSliceRatioBefore)||0,f=parseFloat(r.virtualScrollSliceRatioAfter)||0,M=1+a+f,q=l===void 0||l<=0?1:Math.ceil(l/o.value),g=Math.max(1,q,Math.ceil((r.virtualScrollSliceSize>0?r.virtualScrollSliceSize:10)/M));D.value={total:Math.ceil(g*M),start:Math.ceil(g*a),center:Math.ceil(g*(.5+a)),end:Math.ceil(g*(1+a)),view:q}}function Ue(l,a){const f=r.virtualScrollHorizontal===!0?"width":"height",M={["--q-virtual-scroll-item-"+f]:o.value+"px"};return[l==="tbody"?V(l,{class:"q-virtual-scroll__padding",key:"before",ref:G},[V("tr",[V("td",{style:{[f]:`${_.value}px`,...M},colspan:Re.value})])]):V(l,{class:"q-virtual-scroll__padding",key:"before",ref:G,style:{[f]:`${_.value}px`,...M}}),V(l,{class:"q-virtual-scroll__content",key:"content",ref:L,tabindex:-1},a.flat()),l==="tbody"?V(l,{class:"q-virtual-scroll__padding",key:"after",ref:Z},[V("tr",[V("td",{style:{[f]:`${U.value}px`,...M},colspan:Re.value})])]):V(l,{class:"q-virtual-scroll__padding",key:"after",ref:Z,style:{[f]:`${U.value}px`,...M}})]}function Me(l){c!==l&&(r.onVirtualScroll!==void 0&&R("virtualScroll",{index:l,from:F.value.from,to:F.value.to-1,direction:l<c?"decrease":"increase",ref:h}),c=l)}W();const fe=Wt(Ee,S.platform.is.ios===!0?120:35);Xt(()=>{W()});let ze=!1;return Yt(()=>{ze=!0}),Gt(()=>{if(ze!==!0)return;const l=i();E!==void 0&&l!==void 0&&l!==null&&l.nodeType!==8?Vt(l,E,r.virtualScrollHorizontal,S.lang.rtl):ae(c)}),It(()=>{fe.cancel()}),Object.assign(h,{scrollTo:ae,reset:ne,refresh:xe}),{virtualScrollSliceRange:F,virtualScrollSliceSizeComputed:D,setVirtualScrollSize:W,onVirtualScrollEvt:fe,localResetVirtualScroll:de,padVirtualScroll:Ue,scrollTo:ae,reset:ne,refresh:xe}}const Ct=e=>["add","add-unique","toggle"].includes(e),hl=".*+?^${}()|[]\\",bl=Object.keys(lt);function et(e,i){if(typeof e=="function")return e;const s=e!==void 0?e:i;return o=>o!==null&&typeof o=="object"&&s in o?o[s]:o}const wl=kt({name:"QSelect",inheritAttrs:!1,props:{...pt,...Jt,...lt,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Ct},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:pt.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...xt,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:i,emit:s}){const{proxy:o}=zt(),{$q:b}=o,r=T(!1),R=T(!1),h=T(-1),S=T(""),E=T(!1),c=T(!1);let w=null,p=null,z,_,U,D=null,G,Z,L,F;const Re=T(null),O=T(null),ee=T(null),ne=T(null),xe=T(null),ae=Zt(e),Ee=el(ft),P=y(()=>Array.isArray(e.options)?e.options.length:0),Ae=y(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:He,virtualScrollSliceSizeComputed:de,localResetVirtualScroll:W,padVirtualScroll:Ue,onVirtualScrollEvt:Me,scrollTo:fe,setVirtualScrollSize:ze}=yl({virtualScrollLength:P,getVirtualScrollTarget:Bt,getVirtualScrollEl:ct,virtualScrollItemSizeComputed:Ae}),l=Mt(),a=y(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,u=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const n=e.mapOptions===!0&&z!==void 0?z:[],d=u.map(A=>qt(A,n));return e.modelValue===null&&t===!0?d.filter(A=>A!==null):d}return u}),f=y(()=>{const t={};return bl.forEach(u=>{const n=e[u];n!==void 0&&(t[u]=n)}),t}),M=y(()=>e.optionsDark===null?l.isDark.value:e.optionsDark),q=y(()=>bt(a.value)),g=y(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||a.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),m=y(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),B=y(()=>P.value===0),v=y(()=>a.value.map(t=>Q.value(t)).join(", ")),N=y(()=>e.displayValue!==void 0?e.displayValue:v.value),te=y(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),De=y(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||a.value.some(te.value))),X=y(()=>l.focused.value===!0?e.tabindex:-1),Le=y(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":r.value===!0?"true":"false","aria-controls":`${l.targetUid.value}_lb`};return h.value>=0&&(t["aria-activedescendant"]=`${l.targetUid.value}_${h.value}`),t}),oe=y(()=>({id:`${l.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),ie=y(()=>a.value.map((t,u)=>({index:u,opt:t,html:te.value(t),selected:!0,removeAtIndex:_t,toggleOption:re,tabindex:X.value}))),Pe=y(()=>{if(P.value===0)return[];const{from:t,to:u}=He.value;return e.options.slice(t,u).map((n,d)=>{const A=ve.value(n)===!0,C=We(n)===!0,H=t+d,I={clickable:!0,active:C,activeClass:Fe.value,manualFocus:!0,focused:!1,disable:A,tabindex:-1,dense:e.optionsDense,dark:M.value,role:"option","aria-selected":C===!0?"true":"false",id:`${l.targetUid.value}_${H}`,onClick:()=>{re(n)}};return A!==!0&&(h.value===H&&(I.focused=!0),b.platform.is.desktop===!0&&(I.onMousemove=()=>{r.value===!0&&me(H)})),{index:H,opt:n,html:te.value(n),label:Q.value(n),selected:I.active,focused:I.focused,toggleOption:re,setOptionIndex:me,itemProps:I}})}),Ie=y(()=>e.dropdownIcon!==void 0?e.dropdownIcon:b.iconSet.arrow.dropdown),$e=y(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),Fe=y(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),Y=y(()=>et(e.optionValue,"value")),Q=y(()=>et(e.optionLabel,"label")),ve=y(()=>et(e.optionDisable,"disable")),Ne=y(()=>a.value.map(Y.value)),Ot=y(()=>{const t={onInput:ft,onChange:Ee,onKeydown:st,onKeyup:it,onKeypress:rt,onFocus:at,onClick(u){_===!0&&we(u)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=Ee,t});Ce(a,t=>{z=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&l.innerLoading.value!==!0&&(R.value!==!0&&r.value!==!0||q.value!==!0)&&(U!==!0&&he(),(R.value===!0||r.value===!0)&&Se(""))},{immediate:!0}),Ce(()=>e.fillInput,he),Ce(r,Xe),Ce(P,$t);function ut(t){return e.emitValue===!0?Y.value(t):t}function je(t){if(t!==-1&&t<a.value.length)if(e.multiple===!0){const u=e.modelValue.slice();s("remove",{index:t,value:u.splice(t,1)[0]}),s("update:modelValue",u)}else s("update:modelValue",null)}function _t(t){je(t),l.focus()}function nt(t,u){const n=ut(t);if(e.multiple!==!0){e.fillInput===!0&&Oe(Q.value(t),!0,!0),s("update:modelValue",n);return}if(a.value.length===0){s("add",{index:0,value:n}),s("update:modelValue",e.multiple===!0?[n]:n);return}if(u===!0&&We(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const d=e.modelValue.slice();s("add",{index:d.length,value:n}),d.push(n),s("update:modelValue",d)}function re(t,u){if(l.editable.value!==!0||t===void 0||ve.value(t)===!0)return;const n=Y.value(t);if(e.multiple!==!0){u!==!0&&(Oe(e.fillInput===!0?Q.value(t):"",!0,!0),se()),O.value!==null&&O.value.focus(),(a.value.length===0||_e(Y.value(a.value[0]),n)!==!0)&&s("update:modelValue",e.emitValue===!0?n:t);return}if((_!==!0||E.value===!0)&&l.focus(),at(),a.value.length===0){const C=e.emitValue===!0?n:t;s("add",{index:0,value:C}),s("update:modelValue",e.multiple===!0?[C]:C);return}const d=e.modelValue.slice(),A=Ne.value.findIndex(C=>_e(C,n));if(A!==-1)s("remove",{index:A,value:d.splice(A,1)[0]});else{if(e.maxValues!==void 0&&d.length>=e.maxValues)return;const C=e.emitValue===!0?n:t;s("add",{index:d.length,value:C}),d.push(C)}s("update:modelValue",d)}function me(t){if(b.platform.is.desktop!==!0)return;const u=t!==-1&&t<P.value?t:-1;h.value!==u&&(h.value=u)}function Qe(t=1,u){if(r.value===!0){let n=h.value;do n=yt(n+t,-1,P.value-1);while(n!==-1&&n!==h.value&&ve.value(e.options[n])===!0);h.value!==n&&(me(n),fe(n),u!==!0&&e.useInput===!0&&e.fillInput===!0&&Ke(n>=0?Q.value(e.options[n]):G,!0))}}function qt(t,u){const n=d=>_e(Y.value(d),t);return e.options.find(n)||u.find(n)||t}function We(t){const u=Y.value(t);return Ne.value.find(n=>_e(n,u))!==void 0}function at(t){e.useInput===!0&&O.value!==null&&(t===void 0||O.value===t.target&&t.target.value===v.value)&&O.value.select()}function ot(t){al(t,27)===!0&&r.value===!0&&(we(t),se(),he()),s("keyup",t)}function it(t){const{value:u}=t.target;if(t.keyCode!==void 0){ot(t);return}if(t.target.value="",w!==null&&(clearTimeout(w),w=null),p!==null&&(clearTimeout(p),p=null),he(),typeof u=="string"&&u.length!==0){const n=u.toLocaleLowerCase(),d=C=>{const H=e.options.find(I=>String(C.value(I)).toLocaleLowerCase()===n);return H===void 0?!1:(a.value.indexOf(H)===-1?re(H):se(),!0)},A=C=>{d(Y)!==!0&&C!==!0&&d(Q)!==!0&&Se(u,!0,()=>A(!0))};A()}else l.clearValue(t)}function rt(t){s("keypress",t)}function st(t){if(s("keydown",t),tl(t)===!0)return;const u=S.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),n=t.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(h.value!==-1||u===!0);if(t.keyCode===27){Ge(t);return}if(t.keyCode===9&&n===!1){ge();return}if(t.target===void 0||t.target.id!==l.targetUid.value||l.editable.value!==!0)return;if(t.keyCode===40&&l.innerLoading.value!==!0&&r.value===!1){be(t),ye();return}if(t.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&S.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?je(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&s("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof S.value!="string"||S.value.length===0)&&(be(t),h.value=-1,Qe(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&de.value!==void 0&&(be(t),h.value=Math.max(-1,Math.min(P.value,h.value+(t.keyCode===33?-1:1)*de.value.view)),Qe(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(be(t),Qe(t.keyCode===38?-1:1,e.multiple));const d=P.value;if((L===void 0||F<Date.now())&&(L=""),d>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||L.length!==0)){r.value!==!0&&ye(t);const A=t.key.toLocaleLowerCase(),C=L.length===1&&L[0]===A;F=Date.now()+1500,C===!1&&(be(t),L+=A);const H=new RegExp("^"+L.split("").map(Ye=>hl.indexOf(Ye)!==-1?"\\"+Ye:Ye).join(".*"),"i");let I=h.value;if(C===!0||I<0||H.test(Q.value(e.options[I]))!==!0)do I=yt(I+1,-1,d-1);while(I!==h.value&&(ve.value(e.options[I])===!0||H.test(Q.value(e.options[I]))!==!0));h.value!==I&&ue(()=>{me(I),fe(I),I>=0&&e.useInput===!0&&e.fillInput===!0&&Ke(Q.value(e.options[I]),!0)});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||L!=="")&&(t.keyCode!==9||n===!1))){if(t.keyCode!==9&&be(t),h.value!==-1&&h.value<d){re(e.options[h.value]);return}if(u===!0){const A=(C,H)=>{if(H){if(Ct(H)!==!0)return}else H=e.newValueMode;if(Oe("",e.multiple!==!0,!0),C==null)return;(H==="toggle"?re:nt)(C,H==="add-unique"),e.multiple!==!0&&(O.value!==null&&O.value.focus(),se())};if(e.onNewValue!==void 0?s("newValue",S.value,A):A(S.value),e.multiple!==!0)return}r.value===!0?ge():l.innerLoading.value!==!0&&ye()}}function ct(){return _===!0?xe.value:ee.value!==null&&ee.value.contentEl!==null?ee.value.contentEl:void 0}function Bt(){return ct()}function Tt(){return e.hideSelected===!0?[]:i["selected-item"]!==void 0?ie.value.map(t=>i["selected-item"](t)).slice():i.selected!==void 0?[].concat(i.selected()):e.useChips===!0?ie.value.map((t,u)=>V(cl,{key:"option-"+u,removable:l.editable.value===!0&&ve.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:X.value,onRemove(){t.removeAtIndex(u)}},()=>V("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:Q.value(t.opt)}))):[V("span",{[De.value===!0?"innerHTML":"textContent"]:N.value})]}function dt(){if(B.value===!0)return i["no-option"]!==void 0?i["no-option"]({inputValue:S.value}):void 0;const t=i.option!==void 0?i.option:n=>V(ce,{key:n.index,...n.itemProps},()=>V($,()=>V(J,()=>V("span",{[n.html===!0?"innerHTML":"textContent"]:n.label}))));let u=Ue("div",Pe.value.map(t));return i["before-options"]!==void 0&&(u=i["before-options"]().concat(u)),il(i["after-options"],u)}function Rt(t,u){const n=u===!0?{...Le.value,...l.splitAttrs.attributes.value}:void 0,d={ref:u===!0?O:void 0,key:"i_t",class:g.value,style:e.inputStyle,value:S.value!==void 0?S.value:"",type:"search",...n,id:u===!0?l.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Ot.value};return t!==!0&&_===!0&&(Array.isArray(d.class)===!0?d.class=[...d.class,"no-pointer-events"]:d.class+=" no-pointer-events"),V("input",d)}function ft(t){w!==null&&(clearTimeout(w),w=null),p!==null&&(clearTimeout(p),p=null),!(t&&t.target&&t.target.qComposing===!0)&&(Ke(t.target.value||""),U=!0,G=S.value,l.focused.value!==!0&&(_!==!0||E.value===!0)&&l.focus(),e.onFilter!==void 0&&(w=setTimeout(()=>{w=null,Se(S.value)},e.inputDebounce)))}function Ke(t,u){S.value!==t&&(S.value=t,u===!0||e.inputDebounce===0||e.inputDebounce==="0"?s("inputValue",t):p=setTimeout(()=>{p=null,s("inputValue",t)},e.inputDebounce))}function Oe(t,u,n){U=n!==!0,e.useInput===!0&&(Ke(t,!0),(u===!0||n!==!0)&&(G=t),u!==!0&&Se(t))}function Se(t,u,n){if(e.onFilter===void 0||u!==!0&&l.focused.value!==!0)return;l.innerLoading.value===!0?s("filterAbort"):(l.innerLoading.value=!0,c.value=!0),t!==""&&e.multiple!==!0&&a.value.length!==0&&U!==!0&&t===Q.value(a.value[0])&&(t="");const d=setTimeout(()=>{r.value===!0&&(r.value=!1)},10);D!==null&&clearTimeout(D),D=d,s("filter",t,(A,C)=>{(u===!0||l.focused.value===!0)&&D===d&&(clearTimeout(D),typeof A=="function"&&A(),c.value=!1,ue(()=>{l.innerLoading.value=!1,l.editable.value===!0&&(u===!0?r.value===!0&&se():r.value===!0?Xe(!0):r.value=!0),typeof C=="function"&&ue(()=>{C(o)}),typeof n=="function"&&ue(()=>{n(o)})}))},()=>{l.focused.value===!0&&D===d&&(clearTimeout(D),l.innerLoading.value=!1,c.value=!1),r.value===!0&&(r.value=!1)})}function Et(){return V(dl,{ref:ee,class:m.value,style:e.popupContentStyle,modelValue:r.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&B.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:M.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:$e.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...oe.value,onScrollPassive:Me,onBeforeShow:mt,onBeforeHide:Ht,onShow:Dt},dt)}function Ht(t){St(t),ge()}function Dt(){ze()}function Lt(t){we(t),O.value!==null&&O.value.focus(),E.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Pt(t){we(t),ue(()=>{E.value=!1})}function Nt(){const t=[V(vl,{class:`col-auto ${l.fieldClass.value}`,...f.value,for:l.targetUid.value,dark:M.value,square:!0,loading:c.value,itemAligned:!1,filled:!0,stackLabel:S.value.length!==0,...l.splitAttrs.listeners.value,onFocus:Lt,onBlur:Pt},{...i,rawControl:()=>l.getControl(!0),before:void 0,after:void 0})];return r.value===!0&&t.push(V("div",{ref:xe,class:m.value+" scroll",style:e.popupContentStyle,...oe.value,onClick:Ge,onScrollPassive:Me},dt())),V(ol,{ref:ne,modelValue:R.value,position:e.useInput===!0?"top":void 0,transitionShow:Z,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:mt,onBeforeHide:Qt,onHide:Kt,onShow:Ut},()=>V("div",{class:"q-select__dialog"+(M.value===!0?" q-select__dialog--dark q-dark":"")+(E.value===!0?" q-select__dialog--focused":"")},t))}function Qt(t){St(t),ne.value!==null&&ne.value.__updateRefocusTarget(l.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),l.focused.value=!1}function Kt(t){se(),l.focused.value===!1&&s("blur",t),he()}function Ut(){const t=document.activeElement;(t===null||t.id!==l.targetUid.value)&&O.value!==null&&O.value!==t&&O.value.focus(),ze()}function ge(){R.value!==!0&&(h.value=-1,r.value===!0&&(r.value=!1),l.focused.value===!1&&(D!==null&&(clearTimeout(D),D=null),l.innerLoading.value===!0&&(s("filterAbort"),l.innerLoading.value=!1,c.value=!1)))}function ye(t){l.editable.value===!0&&(_===!0?(l.onControlFocusin(t),R.value=!0,ue(()=>{l.focus()})):l.focus(),e.onFilter!==void 0?Se(S.value):(B.value!==!0||i["no-option"]!==void 0)&&(r.value=!0))}function se(){R.value=!1,ge()}function he(){e.useInput===!0&&Oe(e.multiple!==!0&&e.fillInput===!0&&a.value.length!==0&&Q.value(a.value[0])||"",!0,!0)}function Xe(t){let u=-1;if(t===!0){if(a.value.length!==0){const n=Y.value(a.value[0]);u=e.options.findIndex(d=>_e(Y.value(d),n))}W(u)}me(u)}function $t(t,u){r.value===!0&&l.innerLoading.value===!1&&(W(-1,!0),ue(()=>{r.value===!0&&l.innerLoading.value===!1&&(t>u?W():Xe(!0))}))}function vt(){R.value===!1&&ee.value!==null&&ee.value.updatePosition()}function mt(t){t!==void 0&&we(t),s("popupShow",t),l.hasPopupOpen=!0,l.onControlFocusin(t)}function St(t){t!==void 0&&we(t),s("popupHide",t),l.hasPopupOpen=!1,l.onControlFocusout(t)}function gt(){_=b.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?i["no-option"]!==void 0||e.onFilter!==void 0||B.value===!1:!0),Z=b.platform.is.ios===!0&&_===!0&&e.useInput===!0?"fade":e.transitionShow}return ll(gt),ul(vt),gt(),It(()=>{w!==null&&clearTimeout(w),p!==null&&clearTimeout(p)}),Object.assign(o,{showPopup:ye,hidePopup:se,removeAtIndex:je,add:nt,toggleOption:re,getOptionIndex:()=>h.value,setOptionIndex:me,moveOptionSelection:Qe,filter:Se,updateMenuPosition:vt,updateInputValue:Oe,isOptionSelected:We,getEmittingOptionValue:ut,isOptionDisabled:(...t)=>ve.value.apply(null,t)===!0,getOptionValue:(...t)=>Y.value.apply(null,t),getOptionLabel:(...t)=>Q.value.apply(null,t)}),Object.assign(l,{innerValue:a,fieldClass:y(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:Re,targetRef:O,hasValue:q,showPopup:ye,floatingLabel:y(()=>e.hideSelected!==!0&&q.value===!0||typeof S.value=="number"||S.value.length!==0||bt(e.displayValue)),getControlChild:()=>{if(l.editable.value!==!1&&(R.value===!0||B.value!==!0||i["no-option"]!==void 0))return _===!0?Nt():Et();l.hasPopupOpen===!0&&(l.hasPopupOpen=!1)},controlEvents:{onFocusin(t){l.onControlFocusin(t)},onFocusout(t){l.onControlFocusout(t,()=>{he(),ge()})},onClick(t){if(Ge(t),_!==!0&&r.value===!0){ge(),O.value!==null&&O.value.focus();return}ye(t)}},getControl:t=>{const u=Tt(),n=t===!0||R.value!==!0||_!==!0;if(e.useInput===!0)u.push(Rt(t,n));else if(l.editable.value===!0){const A=n===!0?Le.value:void 0;u.push(V("input",{ref:n===!0?O:void 0,key:"d_t",class:"q-select__focus-target",id:n===!0?l.targetUid.value:void 0,value:N.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...A,onKeydown:st,onKeyup:ot,onKeypress:rt})),n===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&u.push(V("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:it}))}if(ae.value!==void 0&&e.disable!==!0&&Ne.value.length!==0){const A=Ne.value.map(C=>V("option",{value:C,selected:!0}));u.push(V("select",{class:"hidden",name:ae.value,multiple:e.multiple},A))}const d=e.useInput===!0||n!==!0?void 0:l.splitAttrs.attributes.value;return V("div",{class:"q-field__native row items-center",...d,...l.splitAttrs.listeners.value},u)},getInnerAppend:()=>e.loading!==!0&&c.value!==!0&&e.hideDropdownIcon!==!0?[V(nl,{class:"q-select__dropdown-icon"+(r.value===!0?" rotate-180":""),name:Ie.value})]:null}),At(l)}}),Vl={class:"q-pa-md"},Ml={__name:"PageSettings",setup(e){const i=rl();return(s,o)=>(pe(),Ve(fl,null,{default:k(()=>[sl("div",Vl,[x(ht,{bordered:"",padding:""},{default:k(()=>[x(J,{header:""},{default:k(()=>o[6]||(o[6]=[le("Transactions")])),_:1}),qe((pe(),Ve(ce,{tag:"label"},{default:k(()=>[x($,null,{default:k(()=>[x(J,null,{default:k(()=>o[7]||(o[7]=[le("Prompt to delete")])),_:1})]),_:1}),x($,{side:""},{default:k(()=>[x(wt,{color:"blue",modelValue:K(i).settings.promptToDelete,"onUpdate:modelValue":o[0]||(o[0]=b=>K(i).settings.promptToDelete=b),val:"battery"},null,8,["modelValue"])]),_:1})]),_:1})),[[Be]]),qe((pe(),Ve(ce,{tag:"label"},{default:k(()=>[x($,null,{default:k(()=>[x(J,null,{default:k(()=>o[8]||(o[8]=[le("Show Running Balance")])),_:1})]),_:1}),x($,{side:""},{default:k(()=>[x(wt,{color:"blue",modelValue:K(i).settings.showRunningBalance,"onUpdate:modelValue":o[1]||(o[1]=b=>K(i).settings.showRunningBalance=b),val:"battery"},null,8,["modelValue"])]),_:1})]),_:1})),[[Be]]),x(ce,{tag:"label"},{default:k(()=>[x(wl,{outlined:"",modelValue:K(i).settings.currencySymbol,"onUpdate:modelValue":o[2]||(o[2]=b=>K(i).settings.currencySymbol=b),options:K(i).settings.allCurrencySymbols,label:"Currency Symbol",style:{width:"190px"}},null,8,["modelValue","options"])]),_:1})]),_:1}),x(ht,{bordered:"",padding:""},{default:k(()=>[x(J,{header:""},{default:k(()=>o[9]||(o[9]=[le("Screen Mode")])),_:1}),qe((pe(),Ve(ce,{tag:"label"},{default:k(()=>[x($,{avatar:""},{default:k(()=>[x(Je,{modelValue:K(i).settings.darkMode,"onUpdate:modelValue":o[3]||(o[3]=b=>K(i).settings.darkMode=b),val:!1,color:"teal"},null,8,["modelValue"])]),_:1}),x($,null,{default:k(()=>[x(J,null,{default:k(()=>o[10]||(o[10]=[le("Light")])),_:1})]),_:1})]),_:1})),[[Be]]),qe((pe(),Ve(ce,{tag:"label"},{default:k(()=>[x($,{avatar:""},{default:k(()=>[x(Je,{modelValue:K(i).settings.darkMode,"onUpdate:modelValue":o[4]||(o[4]=b=>K(i).settings.darkMode=b),val:!0,color:"orange"},null,8,["modelValue"])]),_:1}),x($,null,{default:k(()=>[x(J,null,{default:k(()=>o[11]||(o[11]=[le("Dark")])),_:1})]),_:1})]),_:1})),[[Be]]),qe((pe(),Ve(ce,{tag:"label"},{default:k(()=>[x($,{avatar:"",top:""},{default:k(()=>[x(Je,{modelValue:K(i).settings.darkMode,"onUpdate:modelValue":o[5]||(o[5]=b=>K(i).settings.darkMode=b),val:"auto",color:"cyan"},null,8,["modelValue"])]),_:1}),x($,null,{default:k(()=>[x(J,null,{default:k(()=>o[12]||(o[12]=[le("Auto")])),_:1}),x(J,{caption:""},{default:k(()=>o[13]||(o[13]=[le("Uses system preference")])),_:1})]),_:1})]),_:1})),[[Be]])]),_:1})])]),_:1}))}};export{Ml as default};
